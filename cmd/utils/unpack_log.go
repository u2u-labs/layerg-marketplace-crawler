package utils

import (
	"math/big"

	"github.com/ethereum/go-ethereum/accounts/abi"
	"github.com/ethereum/go-ethereum/common"
)

const (
	TransferEventSig  = "0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef"
	TransferSingleSig = "0xc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f62"
	TransferBatchSig  = "0x4a39dc06d4c0dbc64b70af90fd698a233a518aa5d07e595d983b8c0526c8f7fb"
	FillOrderSig      = "0xbdccd2b6cc0aa66b222434d0252a7deb21ef0592518868ace31f5d4f56a59f01" // FillOrder(address,address,bytes,uint16,uint256,uint256,uint256)
	CancelOrderSig    = "0x86f8a270a95f47ad48690dd66eda181ea3d229312582e7d222c11e24f39947d0" // CancelOrder(address,bytes,uint16)
)

var (
	ERC20ABI, ERC721ABI, ERC1155ABI, EXCHANGEABI abi.ABI
	ERC20ABIStr                                  = `[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"spender","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"}]`
	ERC721ABIStr                                 = `[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"balance","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"operator","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"owner","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"_approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"}]`
	ERC1155ABIStr                                = `[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256[]","name":"ids","type":"uint256[]"},{"indexed":false,"internalType":"uint256[]","name":"values","type":"uint256[]"}],"name":"TransferBatch","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"id","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"TransferSingle","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"string","name":"value","type":"string"},{"indexed":true,"internalType":"uint256","name":"id","type":"uint256"}],"name":"URI","type":"event"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"id","type":"uint256"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address[]","name":"accounts","type":"address[]"},{"internalType":"uint256[]","name":"ids","type":"uint256[]"}],"name":"balanceOfBatch","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256[]","name":"ids","type":"uint256[]"},{"internalType":"uint256[]","name":"amounts","type":"uint256[]"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeBatchTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"id","type":"uint256"}],"name":"uri","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"}]`
	EXCHANGEABIStr                               = `[{"type":"constructor","stateMutability":"nonpayable","inputs":[]},{"type":"event","name":"BuyerFeeAmountChanged","inputs":[{"type":"uint256","name":"oldValue","internalType":"uint256","indexed":false},{"type":"uint256","name":"newValue","internalType":"uint256","indexed":false}],"anonymous":false},{"type":"event","name":"Cancel","inputs":[{"type":"bytes32","name":"hash","internalType":"bytes32","indexed":false}],"anonymous":false},{"type":"event","name":"CancelOrder","inputs":[{"type":"address","name":"maker","internalType":"address","indexed":false},{"type":"bytes","name":"sig","internalType":"bytes","indexed":false},{"type":"uint16","name":"index","internalType":"uint16","indexed":false}],"anonymous":false},{"type":"event","name":"FeeReceiverChanged","inputs":[{"type":"address","name":"oldValue","internalType":"address","indexed":false},{"type":"address","name":"newValue","internalType":"address","indexed":false}],"anonymous":false},{"type":"event","name":"FillOrder","inputs":[{"type":"address","name":"maker","internalType":"address","indexed":false},{"type":"address","name":"taker","internalType":"address","indexed":false},{"type":"bytes","name":"sig","internalType":"bytes","indexed":false},{"type":"uint16","name":"index","internalType":"uint16","indexed":false},{"type":"uint256","name":"takeQty","internalType":"uint256","indexed":false},{"type":"uint256","name":"currentFilledValue","internalType":"uint256","indexed":false},{"type":"uint256","name":"randomValue","internalType":"uint256","indexed":false}],"anonymous":false},{"type":"event","name":"Match","inputs":[{"type":"bytes32","name":"leftHash","internalType":"bytes32","indexed":false},{"type":"bytes32","name":"rightHash","internalType":"bytes32","indexed":false},{"type":"uint256","name":"newLeftFill","internalType":"uint256","indexed":false},{"type":"uint256","name":"newRightFill","internalType":"uint256","indexed":false}],"anonymous":false},{"type":"event","name":"MatcherChange","inputs":[{"type":"uint256","name":"assetType","internalType":"uint256","indexed":true},{"type":"address","name":"matcher","internalType":"address","indexed":false}],"anonymous":false},{"type":"event","name":"OwnershipTransferred","inputs":[{"type":"address","name":"previousOwner","internalType":"address","indexed":true},{"type":"address","name":"newOwner","internalType":"address","indexed":true}],"anonymous":false},{"type":"event","name":"ProxyChange","inputs":[{"type":"uint256","name":"assetType","internalType":"uint256","indexed":true},{"type":"address","name":"proxy","internalType":"address","indexed":false}],"anonymous":false},{"type":"event","name":"SellerFeeAmountChanged","inputs":[{"type":"uint256","name":"oldValue","internalType":"uint256","indexed":false},{"type":"uint256","name":"newValue","internalType":"uint256","indexed":false}],"anonymous":false},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"__ExchangeV2_init","inputs":[{"type":"address","name":"_transferProxy","internalType":"address"},{"type":"address","name":"_erc20TransferProxy","internalType":"address"},{"type":"uint256","name":"newProtocolFee","internalType":"uint256"},{"type":"address","name":"newDefaultFeeReceiver","internalType":"address"},{"type":"address","name":"newRoyaltiesProvider","internalType":"contract IRoyaltiesProvider"}]},{"type":"function","stateMutability":"view","outputs":[{"type":"address","name":"","internalType":"address"}],"name":"_owner","inputs":[]},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"cancel","inputs":[{"type":"tuple","name":"order","internalType":"struct LibOrder.Order","components":[{"type":"uint8","name":"orderType","internalType":"enum LibOrder.OrderType"},{"type":"address","name":"maker","internalType":"address"},{"type":"tuple","name":"makeAsset","internalType":"struct LibAsset.Asset","components":[{"type":"uint8","name":"assetType","internalType":"uint8"},{"type":"address","name":"contractAddress","internalType":"address"},{"type":"uint256","name":"value","internalType":"uint256"},{"type":"uint256","name":"id","internalType":"uint256"}]},{"type":"address","name":"taker","internalType":"address"},{"type":"tuple","name":"takeAsset","internalType":"struct LibAsset.Asset","components":[{"type":"uint8","name":"assetType","internalType":"uint8"},{"type":"address","name":"contractAddress","internalType":"address"},{"type":"uint256","name":"value","internalType":"uint256"},{"type":"uint256","name":"id","internalType":"uint256"}]},{"type":"uint256","name":"salt","internalType":"uint256"},{"type":"uint256","name":"start","internalType":"uint256"},{"type":"uint256","name":"end","internalType":"uint256"},{"type":"tuple","name":"originFee","internalType":"struct LibOrder.Fee","components":[{"type":"address","name":"receiver","internalType":"address"},{"type":"uint256","name":"amount","internalType":"uint256"}]},{"type":"tuple","name":"royaltyFee","internalType":"struct LibOrder.Fee","components":[{"type":"address","name":"receiver","internalType":"address"},{"type":"uint256","name":"amount","internalType":"uint256"}]},{"type":"bytes","name":"sig","internalType":"bytes"},{"type":"bytes32","name":"root","internalType":"bytes32"},{"type":"bytes32[]","name":"proof","internalType":"bytes32[]"},{"type":"uint16","name":"index","internalType":"uint16"}]}]},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"cancelOrder","inputs":[{"type":"tuple","name":"order","internalType":"struct LibOrder.Order","components":[{"type":"uint8","name":"orderType","internalType":"enum LibOrder.OrderType"},{"type":"address","name":"maker","internalType":"address"},{"type":"tuple","name":"makeAsset","internalType":"struct LibAsset.Asset","components":[{"type":"uint8","name":"assetType","internalType":"uint8"},{"type":"address","name":"contractAddress","internalType":"address"},{"type":"uint256","name":"value","internalType":"uint256"},{"type":"uint256","name":"id","internalType":"uint256"}]},{"type":"address","name":"taker","internalType":"address"},{"type":"tuple","name":"takeAsset","internalType":"struct LibAsset.Asset","components":[{"type":"uint8","name":"assetType","internalType":"uint8"},{"type":"address","name":"contractAddress","internalType":"address"},{"type":"uint256","name":"value","internalType":"uint256"},{"type":"uint256","name":"id","internalType":"uint256"}]},{"type":"uint256","name":"salt","internalType":"uint256"},{"type":"uint256","name":"start","internalType":"uint256"},{"type":"uint256","name":"end","internalType":"uint256"},{"type":"tuple","name":"originFee","internalType":"struct LibOrder.Fee","components":[{"type":"address","name":"receiver","internalType":"address"},{"type":"uint256","name":"amount","internalType":"uint256"}]},{"type":"tuple","name":"royaltyFee","internalType":"struct LibOrder.Fee","components":[{"type":"address","name":"receiver","internalType":"address"},{"type":"uint256","name":"amount","internalType":"uint256"}]},{"type":"bytes","name":"sig","internalType":"bytes"},{"type":"bytes32","name":"root","internalType":"bytes32"},{"type":"bytes32[]","name":"proof","internalType":"bytes32[]"},{"type":"uint16","name":"index","internalType":"uint16"}]}]},{"type":"function","stateMutability":"payable","outputs":[],"name":"directAcceptBid","inputs":[{"type":"tuple","name":"direct","internalType":"struct LibDirectTransfer.AcceptBid","components":[{"type":"tuple","name":"bidOrder","internalType":"struct LibOrder.Order","components":[{"type":"uint8","name":"orderType","internalType":"enum LibOrder.OrderType"},{"type":"address","name":"maker","internalType":"address"},{"type":"tuple","name":"makeAsset","internalType":"struct LibAsset.Asset","components":[{"type":"uint8","name":"assetType","internalType":"uint8"},{"type":"address","name":"contractAddress","internalType":"address"},{"type":"uint256","name":"value","internalType":"uint256"},{"type":"uint256","name":"id","internalType":"uint256"}]},{"type":"address","name":"taker","internalType":"address"},{"type":"tuple","name":"takeAsset","internalType":"struct LibAsset.Asset","components":[{"type":"uint8","name":"assetType","internalType":"uint8"},{"type":"address","name":"contractAddress","internalType":"address"},{"type":"uint256","name":"value","internalType":"uint256"},{"type":"uint256","name":"id","internalType":"uint256"}]},{"type":"uint256","name":"salt","internalType":"uint256"},{"type":"uint256","name":"start","internalType":"uint256"},{"type":"uint256","name":"end","internalType":"uint256"},{"type":"tuple","name":"originFee","internalType":"struct LibOrder.Fee","components":[{"type":"address","name":"receiver","internalType":"address"},{"type":"uint256","name":"amount","internalType":"uint256"}]},{"type":"tuple","name":"royaltyFee","internalType":"struct LibOrder.Fee","components":[{"type":"address","name":"receiver","internalType":"address"},{"type":"uint256","name":"amount","internalType":"uint256"}]},{"type":"bytes","name":"sig","internalType":"bytes"},{"type":"bytes32","name":"root","internalType":"bytes32"},{"type":"bytes32[]","name":"proof","internalType":"bytes32[]"},{"type":"uint16","name":"index","internalType":"uint16"}]},{"type":"tuple","name":"sellOrder","internalType":"struct LibOrder.Order","components":[{"type":"uint8","name":"orderType","internalType":"enum LibOrder.OrderType"},{"type":"address","name":"maker","internalType":"address"},{"type":"tuple","name":"makeAsset","internalType":"struct LibAsset.Asset","components":[{"type":"uint8","name":"assetType","internalType":"uint8"},{"type":"address","name":"contractAddress","internalType":"address"},{"type":"uint256","name":"value","internalType":"uint256"},{"type":"uint256","name":"id","internalType":"uint256"}]},{"type":"address","name":"taker","internalType":"address"},{"type":"tuple","name":"takeAsset","internalType":"struct LibAsset.Asset","components":[{"type":"uint8","name":"assetType","internalType":"uint8"},{"type":"address","name":"contractAddress","internalType":"address"},{"type":"uint256","name":"value","internalType":"uint256"},{"type":"uint256","name":"id","internalType":"uint256"}]},{"type":"uint256","name":"salt","internalType":"uint256"},{"type":"uint256","name":"start","internalType":"uint256"},{"type":"uint256","name":"end","internalType":"uint256"},{"type":"tuple","name":"originFee","internalType":"struct LibOrder.Fee","components":[{"type":"address","name":"receiver","internalType":"address"},{"type":"uint256","name":"amount","internalType":"uint256"}]},{"type":"tuple","name":"royaltyFee","internalType":"struct LibOrder.Fee","components":[{"type":"address","name":"receiver","internalType":"address"},{"type":"uint256","name":"amount","internalType":"uint256"}]},{"type":"bytes","name":"sig","internalType":"bytes"},{"type":"bytes32","name":"root","internalType":"bytes32"},{"type":"bytes32[]","name":"proof","internalType":"bytes32[]"},{"type":"uint16","name":"index","internalType":"uint16"}]}]}]},{"type":"function","stateMutability":"view","outputs":[{"type":"uint256","name":"","internalType":"uint256"}],"name":"fills","inputs":[{"type":"bytes32","name":"","internalType":"bytes32"}]},{"type":"function","stateMutability":"pure","outputs":[{"type":"bytes32","name":"","internalType":"bytes32"}],"name":"getHashed","inputs":[{"type":"tuple","name":"order","internalType":"struct LibOrder.Order","components":[{"type":"uint8","name":"orderType","internalType":"enum LibOrder.OrderType"},{"type":"address","name":"maker","internalType":"address"},{"type":"tuple","name":"makeAsset","internalType":"struct LibAsset.Asset","components":[{"type":"uint8","name":"assetType","internalType":"uint8"},{"type":"address","name":"contractAddress","internalType":"address"},{"type":"uint256","name":"value","internalType":"uint256"},{"type":"uint256","name":"id","internalType":"uint256"}]},{"type":"address","name":"taker","internalType":"address"},{"type":"tuple","name":"takeAsset","internalType":"struct LibAsset.Asset","components":[{"type":"uint8","name":"assetType","internalType":"uint8"},{"type":"address","name":"contractAddress","internalType":"address"},{"type":"uint256","name":"value","internalType":"uint256"},{"type":"uint256","name":"id","internalType":"uint256"}]},{"type":"uint256","name":"salt","internalType":"uint256"},{"type":"uint256","name":"start","internalType":"uint256"},{"type":"uint256","name":"end","internalType":"uint256"},{"type":"tuple","name":"originFee","internalType":"struct LibOrder.Fee","components":[{"type":"address","name":"receiver","internalType":"address"},{"type":"uint256","name":"amount","internalType":"uint256"}]},{"type":"tuple","name":"royaltyFee","internalType":"struct LibOrder.Fee","components":[{"type":"address","name":"receiver","internalType":"address"},{"type":"uint256","name":"amount","internalType":"uint256"}]},{"type":"bytes","name":"sig","internalType":"bytes"},{"type":"bytes32","name":"root","internalType":"bytes32"},{"type":"bytes32[]","name":"proof","internalType":"bytes32[]"},{"type":"uint16","name":"index","internalType":"uint16"}]}]},{"type":"function","stateMutability":"pure","outputs":[{"type":"bytes32","name":"","internalType":"bytes32"}],"name":"getOrderHash","inputs":[{"type":"tuple","name":"order","internalType":"struct LibOrder.Order","components":[{"type":"uint8","name":"orderType","internalType":"enum LibOrder.OrderType"},{"type":"address","name":"maker","internalType":"address"},{"type":"tuple","name":"makeAsset","internalType":"struct LibAsset.Asset","components":[{"type":"uint8","name":"assetType","internalType":"uint8"},{"type":"address","name":"contractAddress","internalType":"address"},{"type":"uint256","name":"value","internalType":"uint256"},{"type":"uint256","name":"id","internalType":"uint256"}]},{"type":"address","name":"taker","internalType":"address"},{"type":"tuple","name":"takeAsset","internalType":"struct LibAsset.Asset","components":[{"type":"uint8","name":"assetType","internalType":"uint8"},{"type":"address","name":"contractAddress","internalType":"address"},{"type":"uint256","name":"value","internalType":"uint256"},{"type":"uint256","name":"id","internalType":"uint256"}]},{"type":"uint256","name":"salt","internalType":"uint256"},{"type":"uint256","name":"start","internalType":"uint256"},{"type":"uint256","name":"end","internalType":"uint256"},{"type":"tuple","name":"originFee","internalType":"struct LibOrder.Fee","components":[{"type":"address","name":"receiver","internalType":"address"},{"type":"uint256","name":"amount","internalType":"uint256"}]},{"type":"tuple","name":"royaltyFee","internalType":"struct LibOrder.Fee","components":[{"type":"address","name":"receiver","internalType":"address"},{"type":"uint256","name":"amount","internalType":"uint256"}]},{"type":"bytes","name":"sig","internalType":"bytes"},{"type":"bytes32","name":"root","internalType":"bytes32"},{"type":"bytes32[]","name":"proof","internalType":"bytes32[]"},{"type":"uint16","name":"index","internalType":"uint16"}]}]},{"type":"function","stateMutability":"view","outputs":[{"type":"address","name":"","internalType":"address"}],"name":"getTransferProxy","inputs":[{"type":"uint8","name":"index","internalType":"uint8"}]},{"type":"function","stateMutability":"payable","outputs":[],"name":"matchOrders","inputs":[{"type":"tuple[]","name":"orderLefts","internalType":"struct LibOrder.Order[]","components":[{"type":"uint8","name":"orderType","internalType":"enum LibOrder.OrderType"},{"type":"address","name":"maker","internalType":"address"},{"type":"tuple","name":"makeAsset","internalType":"struct LibAsset.Asset","components":[{"type":"uint8","name":"assetType","internalType":"uint8"},{"type":"address","name":"contractAddress","internalType":"address"},{"type":"uint256","name":"value","internalType":"uint256"},{"type":"uint256","name":"id","internalType":"uint256"}]},{"type":"address","name":"taker","internalType":"address"},{"type":"tuple","name":"takeAsset","internalType":"struct LibAsset.Asset","components":[{"type":"uint8","name":"assetType","internalType":"uint8"},{"type":"address","name":"contractAddress","internalType":"address"},{"type":"uint256","name":"value","internalType":"uint256"},{"type":"uint256","name":"id","internalType":"uint256"}]},{"type":"uint256","name":"salt","internalType":"uint256"},{"type":"uint256","name":"start","internalType":"uint256"},{"type":"uint256","name":"end","internalType":"uint256"},{"type":"tuple","name":"originFee","internalType":"struct LibOrder.Fee","components":[{"type":"address","name":"receiver","internalType":"address"},{"type":"uint256","name":"amount","internalType":"uint256"}]},{"type":"tuple","name":"royaltyFee","internalType":"struct LibOrder.Fee","components":[{"type":"address","name":"receiver","internalType":"address"},{"type":"uint256","name":"amount","internalType":"uint256"}]},{"type":"bytes","name":"sig","internalType":"bytes"},{"type":"bytes32","name":"root","internalType":"bytes32"},{"type":"bytes32[]","name":"proof","internalType":"bytes32[]"},{"type":"uint16","name":"index","internalType":"uint16"}]},{"type":"tuple[]","name":"orderRights","internalType":"struct LibOrder.Order[]","components":[{"type":"uint8","name":"orderType","internalType":"enum LibOrder.OrderType"},{"type":"address","name":"maker","internalType":"address"},{"type":"tuple","name":"makeAsset","internalType":"struct LibAsset.Asset","components":[{"type":"uint8","name":"assetType","internalType":"uint8"},{"type":"address","name":"contractAddress","internalType":"address"},{"type":"uint256","name":"value","internalType":"uint256"},{"type":"uint256","name":"id","internalType":"uint256"}]},{"type":"address","name":"taker","internalType":"address"},{"type":"tuple","name":"takeAsset","internalType":"struct LibAsset.Asset","components":[{"type":"uint8","name":"assetType","internalType":"uint8"},{"type":"address","name":"contractAddress","internalType":"address"},{"type":"uint256","name":"value","internalType":"uint256"},{"type":"uint256","name":"id","internalType":"uint256"}]},{"type":"uint256","name":"salt","internalType":"uint256"},{"type":"uint256","name":"start","internalType":"uint256"},{"type":"uint256","name":"end","internalType":"uint256"},{"type":"tuple","name":"originFee","internalType":"struct LibOrder.Fee","components":[{"type":"address","name":"receiver","internalType":"address"},{"type":"uint256","name":"amount","internalType":"uint256"}]},{"type":"tuple","name":"royaltyFee","internalType":"struct LibOrder.Fee","components":[{"type":"address","name":"receiver","internalType":"address"},{"type":"uint256","name":"amount","internalType":"uint256"}]},{"type":"bytes","name":"sig","internalType":"bytes"},{"type":"bytes32","name":"root","internalType":"bytes32"},{"type":"bytes32[]","name":"proof","internalType":"bytes32[]"},{"type":"uint16","name":"index","internalType":"uint16"}]}]},{"type":"function","stateMutability":"view","outputs":[{"type":"address","name":"","internalType":"address"}],"name":"owner","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"address","name":"receiver","internalType":"address"},{"type":"uint48","name":"buyerAmount","internalType":"uint48"},{"type":"uint48","name":"sellerAmount","internalType":"uint48"}],"name":"protocolFee","inputs":[]},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"renounceOwnership","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"address","name":"","internalType":"contract IRoyaltiesProvider"}],"name":"royaltiesRegistry","inputs":[]},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"setAllProtocolFeeData","inputs":[{"type":"address","name":"_receiver","internalType":"address"},{"type":"uint48","name":"_buyerAmount","internalType":"uint48"},{"type":"uint48","name":"_sellerAmount","internalType":"uint48"}]},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"setAssetMatcher","inputs":[{"type":"uint256","name":"assetType","internalType":"uint256"},{"type":"address","name":"matcher","internalType":"address"}]},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"setPrtocolFeeBuyerAmount","inputs":[{"type":"uint48","name":"_buyerAmount","internalType":"uint48"}]},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"setPrtocolFeeReceiver","inputs":[{"type":"address","name":"_receiver","internalType":"address"}]},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"setPrtocolFeeSellerAmount","inputs":[{"type":"uint48","name":"_sellerAmount","internalType":"uint48"}]},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"setRoyaltiesRegistry","inputs":[{"type":"address","name":"newRoyaltiesRegistry","internalType":"contract IRoyaltiesProvider"}]},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"setTransferProxy","inputs":[{"type":"uint8","name":"index","internalType":"uint8"},{"type":"address","name":"proxy","internalType":"address"}]},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"transferOwnership","inputs":[{"type":"address","name":"newOwner","internalType":"address"}]},{"type":"function","stateMutability":"pure","outputs":[{"type":"bool","name":"isValid","internalType":"bool"}],"name":"validateListing","inputs":[{"type":"bytes32","name":"root","internalType":"bytes32"},{"type":"bytes32[]","name":"proof","internalType":"bytes32[]"},{"type":"tuple","name":"order","internalType":"struct LibOrder.Order","components":[{"type":"uint8","name":"orderType","internalType":"enum LibOrder.OrderType"},{"type":"address","name":"maker","internalType":"address"},{"type":"tuple","name":"makeAsset","internalType":"struct LibAsset.Asset","components":[{"type":"uint8","name":"assetType","internalType":"uint8"},{"type":"address","name":"contractAddress","internalType":"address"},{"type":"uint256","name":"value","internalType":"uint256"},{"type":"uint256","name":"id","internalType":"uint256"}]},{"type":"address","name":"taker","internalType":"address"},{"type":"tuple","name":"takeAsset","internalType":"struct LibAsset.Asset","components":[{"type":"uint8","name":"assetType","internalType":"uint8"},{"type":"address","name":"contractAddress","internalType":"address"},{"type":"uint256","name":"value","internalType":"uint256"},{"type":"uint256","name":"id","internalType":"uint256"}]},{"type":"uint256","name":"salt","internalType":"uint256"},{"type":"uint256","name":"start","internalType":"uint256"},{"type":"uint256","name":"end","internalType":"uint256"},{"type":"tuple","name":"originFee","internalType":"struct LibOrder.Fee","components":[{"type":"address","name":"receiver","internalType":"address"},{"type":"uint256","name":"amount","internalType":"uint256"}]},{"type":"tuple","name":"royaltyFee","internalType":"struct LibOrder.Fee","components":[{"type":"address","name":"receiver","internalType":"address"},{"type":"uint256","name":"amount","internalType":"uint256"}]},{"type":"bytes","name":"sig","internalType":"bytes"},{"type":"bytes32","name":"root","internalType":"bytes32"},{"type":"bytes32[]","name":"proof","internalType":"bytes32[]"},{"type":"uint16","name":"index","internalType":"uint16"}]}]}]`
)

// Erc20TransferEvent represents the structure of the Transfer event in the contract
type Erc20TransferEvent struct {
	From  common.Address
	To    common.Address
	Value *big.Int
}

// Erc721TransferEvent represents the structure of the ERC721 Transfer event
type Erc721TransferEvent struct {
	From    common.Address
	To      common.Address
	TokenID *big.Int
}

// Erc1155TransferSingleEvent represents the structure of the ERC1155 TransferSingle event
type Erc1155TransferSingleEvent struct {
	Operator common.Address
	From     common.Address
	To       common.Address
	Id       *big.Int
	Value    *big.Int
}

// Erc1155TransferBatchEvent represents the structure of the ERC1155 TransferBatch event
type Erc1155TransferBatchEvent struct {
	Operator common.Address
	From     common.Address
	To       common.Address
	Ids      []*big.Int
	Values   []*big.Int
}

type CancelOrderEvent struct {
	Maker common.Address
	Sig   []byte
	Index uint16
}

type FillOrderEvent struct {
	Maker   common.Address
	Taker   common.Address
	Sig     []byte
	Index   uint16
	TakeQty *big.Int
	//FilledQty          *big.Int
	//TakeAssetId        *big.Int
	CurrentFilledValue *big.Int
	RandomValue        *big.Int
}
